<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CryptoLab - Cryptography & Data Science</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        :root {
            --primary: #2c3e50;
            --secondary: #3498db;
            --accent: #e74c3c;
            --light: #ecf0f1;
            --dark: #2c3e50;
            --success: #2ecc71;
            --warning: #f39c12;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: #f5f7fa;
            color: #333;
            line-height: 1.6;
        }
        
        header {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: white;
            padding: 1rem 0;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }
        
        .container {
            width: 90%;
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 15px;
        }
        
        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .logo {
            font-size: 1.8rem;
            font-weight: 700;
            display: flex;
            align-items: center;
        }
        
        .logo i {
            margin-right: 10px;
            font-size: 2rem;
        }
        
        nav ul {
            display: flex;
            list-style: none;
        }
        
        nav ul li {
            margin-left: 1.5rem;
        }
        
        nav ul li a {
            color: white;
            text-decoration: none;
            font-weight: 500;
            transition: all 0.3s ease;
            padding: 5px 10px;
            border-radius: 4px;
        }
        
        nav ul li a:hover {
            background-color: rgba(255, 255, 255, 0.2);
        }
        
        .hero {
            background: linear-gradient(rgba(44, 62, 80, 0.8), rgba(44, 62, 80, 0.9)), url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="100" height="100" viewBox="0 0 100 100"><rect width="100" height="100" fill="%232c3e50"/><path d="M0 0L100 100M100 0L0 100" stroke="%233498db" stroke-width="1"/></svg>');
            color: white;
            padding: 4rem 0;
            text-align: center;
        }
        
        .hero h1 {
            font-size: 2.5rem;
            margin-bottom: 1rem;
        }
        
        .hero p {
            font-size: 1.2rem;
            max-width: 700px;
            margin: 0 auto 2rem;
        }
        
        .btn {
            display: inline-block;
            background-color: var(--secondary);
            color: white;
            padding: 0.8rem 1.5rem;
            border: none;
            border-radius: 4px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            text-decoration: none;
        }
        
        .btn:hover {
            background-color: #2980b9;
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        }
        
        .btn-warning {
            background-color: var(--warning);
        }
        
        .btn-warning:hover {
            background-color: #e67e22;
        }
        
        .section {
            padding: 4rem 0;
        }
        
        .section-title {
            text-align: center;
            margin-bottom: 3rem;
            color: var(--primary);
        }
        
        .section-title h2 {
            font-size: 2rem;
            margin-bottom: 0.5rem;
        }
        
        .section-title p {
            color: #020707;
            max-width: 600px;
            margin: 0 auto;
        }
        
        .tools-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 2rem;
        }
        
        .tool-card {
            background-color: white;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            transition: transform 0.3s ease;
        }
        
        .tool-card:hover {
            transform: translateY(-5px);
        }
        
        .tool-header {
            background-color: var(--primary);
            color: white;
            padding: 1rem;
            text-align: center;
        }
        
        .tool-body {
            padding: 1.5rem;
        }
        
        .form-group {
            margin-bottom: 1rem;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 500;
        }
        
        .form-control {
            width: 100%;
            padding: 0.8rem;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 1rem;
        }
        
        .form-control:focus {
            outline: none;
            border-color: var(--secondary);
            box-shadow: 0 0 0 2px rgba(52, 152, 219, 0.2);
        }
        
        textarea.form-control {
            min-height: 120px;
            resize: vertical;
        }
        
        .result-box {
            background-color: #7290ad;
            border: 1px solid #e9ecef;
            border-radius: 4px;
            padding: 1rem;
            margin-top: 1rem;
            min-height: 100px;
            word-break: break-all;
        }
        
        .algorithms {
            background-color: var(--light);
        }
        
        .algo-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 2rem;
        }
        
        .algo-card {
            background-color: white;
            border-radius: 8px;
            padding: 2rem;
            text-align: center;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            transition: all 0.3s ease;
        }
        
        .algo-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 15px rgba(0, 0, 0, 0.1);
        }
        
        .algo-icon {
            font-size: 3rem;
            color: var(--secondary);
            margin-bottom: 1rem;
        }
        
        .algo-card h3 {
            margin-bottom: 1rem;
            color: var(--primary);
        }
        
        .history {
            background-color: white;
        }
        
        .timeline {
            max-width: 800px;
            margin: 0 auto;
            position: relative;
        }
        
        .timeline::before {
            content: '';
            position: absolute;
            left: 50%;
            top: 0;
            bottom: 0;
            width: 2px;
            background-color: var(--secondary);
            transform: translateX(-50%);
        }
        
        .timeline-item {
            margin-bottom: 2rem;
            position: relative;
            width: 50%;
            padding: 0 2rem;
        }
        
        .timeline-item:nth-child(odd) {
            left: 0;
        }
        
        .timeline-item:nth-child(even) {
            left: 50%;
        }
        
        .timeline-content {
            background-color: white;
            padding: 1.5rem;
            border-radius: 8px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            position: relative;
        }
        
        .timeline-content::after {
            content: '';
            position: absolute;
            top: 20px;
            width: 20px;
            height: 20px;
            background-color: white;
            transform: rotate(45deg);
        }
        
        .timeline-item:nth-child(odd) .timeline-content::after {
            right: -10px;
        }
        
        .timeline-item:nth-child(even) .timeline-content::after {
            left: -10px;
        }
        
        .timeline-year {
            font-weight: bold;
            color: var(--secondary);
            margin-bottom: 0.5rem;
        }
        
        .data-science-section {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }
        
        .ds-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 2rem;
        }
        
        .ds-card {
            background-color: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border-radius: 8px;
            padding: 2rem;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
        }
        
        .chart-container {
            background-color: white;
            border-radius: 8px;
            padding: 1.5rem;
            margin-top: 1rem;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }
        
        .ml-section {
            background-color: white;
        }
        
        .ml-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 2rem;
        }
        
        .ml-card {
            background-color: var(--light);
            border-radius: 8px;
            padding: 2rem;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }
        
        footer {
            background-color: var(--dark);
            color: white;
            padding: 2rem 0;
            text-align: center;
        }
        
        .footer-content {
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        
        .footer-links {
            display: flex;
            margin: 1rem 0;
        }
        
        .footer-links a {
            color: white;
            margin: 0 1rem;
            text-decoration: none;
        }
        
        .footer-links a:hover {
            text-decoration: underline;
        }
        
        .copyright {
            margin-top: 1rem;
            color: #bdc3c7;
            font-size: 0.9rem;
        }
        
        @media (max-width: 768px) {
            .header-content {
                flex-direction: column;
                text-align: center;
            }
            
            nav ul {
                margin-top: 1rem;
                justify-content: center;
            }
            
            nav ul li {
                margin: 0 0.5rem;
            }
            
            .timeline::before {
                left: 20px;
            }
            
            .timeline-item {
                width: 100%;
                left: 0 !important;
                padding-left: 50px;
                padding-right: 0;
            }
            
            .timeline-content::after {
                left: -10px !important;
            }
        }
    </style>
</head>
<body>
    <header>
        <div class="container">
            <div class="header-content">
                <div class="logo">
                    <i>üîê</i>
                    <span>CryptoLab DS</span>
                </div>
                <nav>
                    <ul>
                        <li><a href="#tools">Tools</a></li>
                        <li><a href="#data-science">Data Science</a></li>
                        <li><a href="#ml-crypto">ML Cryptanalysis</a></li>
                        <li><a href="#algorithms">Algorithms</a></li>
                        <li><a href="#history">History</a></li>
                    </ul>
                </nav>
            </div>
        </div>
    </header>

    <section class="hero">
        <div class="container">
            <h1>Cryptography Meets Data Science</h1>
            <p>Explore cryptographic algorithms through the lens of data science with frequency analysis, pattern recognition, and machine learning approaches.</p>
            <a href="#data-science" class="btn">Explore Data Science Tools</a>
        </div>
    </section>

    <section id="data-science" class="section data-science-section">
        <div class="container">
            <div class="section-title">
                <h2>Data Science Cryptanalysis</h2>
                <p>Use data science techniques to analyze and break ciphers</p>
            </div>
            
            <div class="ds-grid">
                <div class="ds-card">
                    <h3>Frequency Analysis</h3>
                    <p>Analyze letter frequency distributions to break substitution ciphers</p>
                    <div class="form-group">
                        <label for="freq-text">Text to analyze:</label>
                        <textarea id="freq-text" class="form-control" placeholder="Enter encrypted text for frequency analysis">The quick brown fox jumps over the lazy dog. This sentence contains all letters of the English alphabet.</textarea>
                    </div>
                    <button id="analyze-freq" class="btn">Analyze Frequency</button>
                    <div class="chart-container">
                        <canvas id="freq-chart"></canvas>
                    </div>
                </div>
                
                <div class="ds-card">
                    <h3>Pattern Recognition</h3>
                    <p>Identify repeated patterns that might indicate cipher weaknesses</p>
                    <div class="form-group">
                        <label for="pattern-text">Text for pattern analysis:</label>
                        <textarea id="pattern-text" class="form-control" placeholder="Enter text to find patterns">Ciphertext with repeated sequences can reveal information about the encryption method used.</textarea>
                    </div>
                    <button id="find-patterns" class="btn">Find Patterns</button>
                    <div class="result-box" id="pattern-result">
                        Pattern analysis results will appear here
                    </div>
                </div>
                
                <div class="ds-card">
                    <h3>Entropy Analysis</h3>
                    <p>Measure the randomness of text to detect encryption</p>
                    <div class="form-group">
                        <label for="entropy-text">Text for entropy calculation:</label>
                        <textarea id="entropy-text" class="form-control" placeholder="Enter text to calculate entropy">Encrypted text typically has higher entropy than normal language text.</textarea>
                    </div>
                    <button id="calculate-entropy" class="btn">Calculate Entropy</button>
                    <div class="result-box" id="entropy-result">
                        Entropy: Not calculated yet
                    </div>
                    <div class="chart-container">
                        <canvas id="entropy-chart"></canvas>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <section id="ml-crypto" class="section ml-section">
        <div class="container">
            <div class="section-title">
                <h2>Machine Learning in Cryptography</h2>
                <p>Explore how ML techniques can be applied to cryptographic problems</p>
            </div>
            
            <div class="ml-grid">
                <div class="ml-card">
                    <h3>Cipher Classification</h3>
                    <p>Train a model to identify the type of cipher used</p>
                    <div class="form-group">
                        <label for="cipher-sample">Ciphertext sample:</label>
                        <textarea id="cipher-sample" class="form-control" placeholder="Enter ciphertext to classify">Gur dhvpx oebja sbk whzcf bire gur ynml qbt.</textarea>
                    </div>
                    <button id="classify-cipher" class="btn">Classify Cipher</button>
                    <div class="result-box" id="classification-result">
                        Classification results will appear here
                    </div>
                </div>
                
                <div class="ml-card">
                    <h3>Neural Cryptanalysis</h3>
                    <p>Simulate a neural network approach to breaking ciphers</p>
                    <div class="form-group">
                        <label for="neural-input">Input for neural analysis:</label>
                        <textarea id="neural-input" class="form-control" placeholder="Enter text for neural analysis">Sample text for neural network simulation.</textarea>
                    </div>
                    <button id="neural-analysis" class="btn btn-warning">Run Neural Analysis</button>
                    <div class="result-box" id="neural-result">
                        Neural network analysis results will appear here
                    </div>
                </div>
                
                <div class="ml-card">
                    <h3>Training Data Generator</h3>
                    <p>Generate training data for cryptographic ML models</p>
                    <div class="form-group">
                        <label for="training-text">Base text for training data:</label>
                        <textarea id="training-text" class="form-control" placeholder="Enter base text">This is sample text for generating training data.</textarea>
                    </div>
                    <button id="generate-data" class="btn">Generate Training Data</button>
                    <div class="result-box" id="training-result">
                        Generated training data will appear here
                    </div>
                </div>
            </div>
        </div>
    </section>

    <section id="tools" class="section">
        <div class="container">
            <div class="section-title">
                <h2>Cryptography Tools</h2>
                <p>Use our tools to encrypt and decrypt messages using different algorithms</p>
            </div>
            
            <div class="tools-grid">
                <!-- Caesar Cipher Tool -->
                <div class="tool-card">
                    <div class="tool-header">
                        <h3>Caesar Cipher</h3>
                    </div>
                    <div class="tool-body">
                        <div class="form-group">
                            <label for="caesar-text">Text to encrypt/decrypt:</label>
                            <textarea id="caesar-text" class="form-control" placeholder="Enter your text here">Hello World! This is a test message.</textarea>
                        </div>
                        <div class="form-group">
                            <label for="caesar-shift">Shift value (1-25):</label>
                            <input type="number" id="caesar-shift" class="form-control" min="1" max="25" value="3">
                        </div>
                        <div class="form-group">
                            <button id="caesar-encrypt" class="btn" style="margin-right: 10px;">Encrypt</button>
                            <button id="caesar-decrypt" class="btn">Decrypt</button>
                        </div>
                        <div class="result-box" id="caesar-result"></div>
                    </div>
                </div>
                
                <!-- Vigen√®re Cipher Tool -->
                <div class="tool-card">
                    <div class="tool-header">
                        <h3>Vigen√®re Cipher</h3>
                    </div>
                    <div class="tool-body">
                        <div class="form-group">
                            <label for="vigenere-text">Text to encrypt/decrypt:</label>
                            <textarea id="vigenere-text" class="form-control" placeholder="Enter your text here">This is a secret message.</textarea>
                        </div>
                        <div class="form-group">
                            <label for="vigenere-key">Key (letters only):</label>
                            <input type="text" id="vigenere-key" class="form-control" placeholder="Enter key" value="KEY">
                        </div>
                        <div class="form-group">
                            <button id="vigenere-encrypt" class="btn" style="margin-right: 10px;">Encrypt</button>
                            <button id="vigenere-decrypt" class="btn">Decrypt</button>
                        </div>
                        <div class="result-box" id="vigenere-result"></div>
                    </div>
                </div>
                
                <!-- Base64 Tool -->
                <div class="tool-card">
                    <div class="tool-header">
                        <h3>Base64 Encoding/Decoding</h3>
                    </div>
                    <div class="tool-body">
                        <div class="form-group">
                            <label for="base64-text">Text to encode/decode:</label>
                            <textarea id="base64-text" class="form-control" placeholder="Enter your text here">This will be encoded in Base64.</textarea>
                        </div>
                        <div class="form-group">
                            <button id="base64-encode" class="btn" style="margin-right: 10px;">Encode</button>
                            <button id="base64-decode" class="btn">Decode</button>
                        </div>
                        <div class="result-box" id="base64-result"></div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <section id="algorithms" class="section algorithms">
        <div class="container">
            <div class="section-title">
                <h2>Cryptographic Algorithms</h2>
                <p>Learn about different cryptographic techniques and their applications</p>
            </div>
            
            <div class="algo-grid">
                <div class="algo-card">
                    <div class="algo-icon">üîë</div>
                    <h3>Symmetric Encryption</h3>
                    <p>Uses the same key for encryption and decryption. Fast and efficient for large amounts of data.</p>
                </div>
                
                <div class="algo-card">
                    <div class="algo-icon">üîì</div>
                    <h3>Asymmetric Encryption</h3>
                    <p>Uses a pair of keys: public and private. More secure but slower than symmetric encryption.</p>
                </div>
                
                <div class="algo-card">
                    <div class="algo-icon">üìù</div>
                    <h3>Hash Functions</h3>
                    <p>One-way functions that convert data into fixed-size strings. Used for data integrity verification.</p>
                </div>
                
                <div class="algo-card">
                    <div class="algo-icon">üîí</div>
                    <h3>Digital Signatures</h3>
                    <p>Mathematical scheme for verifying the authenticity of digital messages or documents.</p>
                </div>
            </div>
        </div>
    </section>

    <section id="history" class="section history">
        <div class="container">
            <div class="section-title">
                <h2>History of Cryptography</h2>
                <p>From ancient times to modern encryption</p>
            </div>
            
            <div class="timeline">
                <div class="timeline-item">
                    <div class="timeline-content">
                        <div class="timeline-year">~100 BC</div>
                        <h3>Caesar Cipher</h3>
                        <p>Julius Caesar used this substitution cipher to protect military communications by shifting letters in the alphabet.</p>
                    </div>
                </div>
                
                <div class="timeline-item">
                    <div class="timeline-content">
                        <div class="timeline-year">16th Century</div>
                        <h3>Vigen√®re Cipher</h3>
                        <p>Blaise de Vigen√®re created this polyalphabetic cipher that uses a keyword to shift letters, making it more secure than simple substitution.</p>
                    </div>
                </div>
                
                <div class="timeline-item">
                    <div class="timeline-content">
                        <div class="timeline-year">World War II</div>
                        <h3>Enigma Machine</h3>
                        <p>The Germans used this electro-mechanical rotor cipher machine, which was famously broken by Allied cryptanalysts.</p>
                    </div>
                </div>
                
                <div class="timeline-item">
                    <div class="timeline-content">
                        <div class="timeline-year">1970s</div>
                        <h3>Public-Key Cryptography</h3>
                        <p>Whitfield Diffie and Martin Hellman introduced the concept of asymmetric key cryptography, revolutionizing secure communications.</p>
                    </div>
                </div>
                
                <div class="timeline-item">
                    <div class="timeline-content">
                        <div class="timeline-year">2000s</div>
                        <h3>Quantum Cryptography</h3>
                        <p>Emerging field that uses quantum mechanical properties to perform cryptographic tasks, promising unprecedented security.</p>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <footer id="about">
        <div class="container">
            <div class="footer-content">
                <div class="logo">
                    <i>üîê</i>
                    <span>CryptoLab DS</span>
                </div>
                <div class="footer-links">
                    <a href="#tools">Tools</a>
                    <a href="#data-science">Data Science</a>
                    <a href="#ml-crypto">ML Cryptanalysis</a>
                    <a href="#algorithms">Algorithms</a>
                    <a href="#history">History</a>
                </div>
                <div class="copyright">
                    &copy; 2023 CryptoLab DS. All rights reserved. | Educational purposes only.
                </div>
            </div>
        </div>
    </footer>

    <script>
        // Initialize charts
        let freqChart, entropyChart;
        
        // Caesar Cipher Implementation
        document.getElementById('caesar-encrypt').addEventListener('click', function() {
            const text = document.getElementById('caesar-text').value;
            const shift = parseInt(document.getElementById('caesar-shift').value);
            const result = caesarCipher(text, shift);
            document.getElementById('caesar-result').textContent = result;
        });

        document.getElementById('caesar-decrypt').addEventListener('click', function() {
            const text = document.getElementById('caesar-text').value;
            const shift = parseInt(document.getElementById('caesar-shift').value);
            const result = caesarCipher(text, 26 - shift);
            document.getElementById('caesar-result').textContent = result;
        });

        function caesarCipher(text, shift) {
            let result = '';
            
            for (let i = 0; i < text.length; i++) {
                let char = text[i];
                
                if (char.match(/[a-z]/i)) {
                    const code = text.charCodeAt(i);
                    
                    if (code >= 65 && code <= 90) {
                        char = String.fromCharCode(((code - 65 + shift) % 26) + 65);
                    } else if (code >= 97 && code <= 122) {
                        char = String.fromCharCode(((code - 97 + shift) % 26) + 97);
                    }
                }
                
                result += char;
            }
            
            return result;
        }

        // Vigen√®re Cipher Implementation
        document.getElementById('vigenere-encrypt').addEventListener('click', function() {
            const text = document.getElementById('vigenere-text').value;
            const key = document.getElementById('vigenere-key').value.toUpperCase();
            const result = vigenereCipher(text, key, true);
            document.getElementById('vigenere-result').textContent = result;
        });

        document.getElementById('vigenere-decrypt').addEventListener('click', function() {
            const text = document.getElementById('vigenere-text').value;
            const key = document.getElementById('vigenere-key').value.toUpperCase();
            const result = vigenereCipher(text, key, false);
            document.getElementById('vigenere-result').textContent = result;
        });

        function vigenereCipher(text, key, encrypt) {
            let result = '';
            let keyIndex = 0;
            
            for (let i = 0; i < text.length; i++) {
                let char = text[i];
                
                if (char.match(/[a-z]/i)) {
                    const code = text.charCodeAt(i);
                    const keyChar = key[keyIndex % key.length];
                    const keyShift = keyChar.charCodeAt(0) - 65;
                    
                    if (code >= 65 && code <= 90) {
                        if (encrypt) {
                            char = String.fromCharCode(((code - 65 + keyShift) % 26) + 65);
                        } else {
                            char = String.fromCharCode(((code - 65 - keyShift + 26) % 26) + 65);
                        }
                    } else if (code >= 97 && code <= 122) {
                        if (encrypt) {
                            char = String.fromCharCode(((code - 97 + keyShift) % 26) + 97);
                        } else {
                            char = String.fromCharCode(((code - 97 - keyShift + 26) % 26) + 97);
                        }
                    }
                    
                    keyIndex++;
                }
                
                result += char;
            }
            
            return result;
        }

        // Base64 Implementation
        document.getElementById('base64-encode').addEventListener('click', function() {
            const text = document.getElementById('base64-text').value;
            const result = btoa(text);
            document.getElementById('base64-result').textContent = result;
        });

        document.getElementById('base64-decode').addEventListener('click', function() {
            const text = document.getElementById('base64-text').value;
            try {
                const result = atob(text);
                document.getElementById('base64-result').textContent = result;
            } catch (e) {
                document.getElementById('base64-result').textContent = 'Error: Invalid Base64 string';
            }
        });

        // Data Science Features
        
        // Frequency Analysis
        document.getElementById('analyze-freq').addEventListener('click', function() {
            const text = document.getElementById('freq-text').value.toLowerCase();
            const freqData = calculateFrequency(text);
            displayFrequencyChart(freqData);
        });

        function calculateFrequency(text) {
            const freq = {};
            let totalLetters = 0;
            
            // Initialize frequency object
            for (let i = 97; i <= 122; i++) {
                freq[String.fromCharCode(i)] = 0;
            }
            
            // Count letter frequencies
            for (let char of text) {
                if (char >= 'a' && char <= 'z') {
                    freq[char]++;
                    totalLetters++;
                }
            }
            
            // Calculate percentages
            const percentages = {};
            for (let letter in freq) {
                percentages[letter] = totalLetters > 0 ? (freq[letter] / totalLetters * 100).toFixed(2) : 0;
            }
            
            return { counts: freq, percentages: percentages, total: totalLetters };
        }

        function displayFrequencyChart(freqData) {
            const ctx = document.getElementById('freq-chart').getContext('2d');
            
            if (freqChart) {
                freqChart.destroy();
            }
            
            const letters = Object.keys(freqData.counts);
            const percentages = letters.map(letter => parseFloat(freqData.percentages[letter]));
            
            freqChart = new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: letters,
                    datasets: [{
                        label: 'Letter Frequency (%)',
                        data: percentages,
                        backgroundColor: 'rgba(52, 152, 219, 0.7)',
                        borderColor: 'rgba(52, 152, 219, 1)',
                        borderWidth: 1
                    }]
                },
                options: {
                    scales: {
                        y: {
                            beginAtZero: true,
                            title: {
                                display: true,
                                text: 'Frequency (%)'
                            }
                        },
                        x: {
                            title: {
                                display: true,
                                text: 'Letters'
                            }
                        }
                    },
                    plugins: {
                        title: {
                            display: true,
                            text: 'Letter Frequency Distribution'
                        }
                    }
                }
            });
        }

        // Pattern Recognition
        document.getElementById('find-patterns').addEventListener('click', function() {
            const text = document.getElementById('pattern-text').value.toLowerCase().replace(/[^a-z]/g, '');
            const patterns = findRepeatedPatterns(text, 3, 10);
            displayPatterns(patterns);
        });

        function findRepeatedPatterns(text, minLength, maxLength) {
            const patterns = {};
            
            for (let length = minLength; length <= maxLength; length++) {
                for (let i = 0; i <= text.length - length; i++) {
                    const pattern = text.substring(i, i + length);
                    
                    if (patterns[pattern]) {
                        patterns[pattern].count++;
                        patterns[pattern].positions.push(i);
                    } else {
                        patterns[pattern] = {
                            count: 1,
                            positions: [i]
                        };
                    }
                }
            }
            
            // Filter patterns that appear more than once
            const repeatedPatterns = {};
            for (let pattern in patterns) {
                if (patterns[pattern].count > 1) {
                    repeatedPatterns[pattern] = patterns[pattern];
                }
            }
            
            return repeatedPatterns;
        }

        function displayPatterns(patterns) {
            let result = '<h4>Repeated Patterns Found:</h4>';
            
            if (Object.keys(patterns).length === 0) {
                result += '<p>No repeated patterns found.</p>';
            } else {
                const sortedPatterns = Object.keys(patterns).sort((a, b) => patterns[b].count - patterns[a].count);
                
                sortedPatterns.slice(0, 10).forEach(pattern => {
                    result += `<p><strong>"${pattern}"</strong> appears ${patterns[pattern].count} times at positions: ${patterns[pattern].positions.join(', ')}</p>`;
                });
            }
            
            document.getElementById('pattern-result').innerHTML = result;
        }

        // Entropy Analysis
        document.getElementById('calculate-entropy').addEventListener('click', function() {
            const text = document.getElementById('entropy-text').value;
            const entropy = calculateEntropy(text);
            document.getElementById('entropy-result').innerHTML = `Entropy: ${entropy.toFixed(4)} bits per character`;
            displayEntropyComparison(entropy);
        });

        function calculateEntropy(text) {
            // Remove non-alphabetic characters and convert to lowercase
            const cleanText = text.toLowerCase().replace(/[^a-z]/g, '');
            
            if (cleanText.length === 0) return 0;
            
            // Calculate character frequencies
            const freq = {};
            for (let char of cleanText) {
                freq[char] = (freq[char] || 0) + 1;
            }
            
            // Calculate entropy
            let entropy = 0;
            for (let char in freq) {
                const probability = freq[char] / cleanText.length;
                entropy -= probability * Math.log2(probability);
            }
            
            return entropy;
        }

        function displayEntropyComparison(entropy) {
            const ctx = document.getElementById('entropy-chart').getContext('2d');
            
            if (entropyChart) {
                entropyChart.destroy();
            }
            
            // Reference entropy values for comparison
            const referenceData = {
                'English Text': 4.0,
                'Random Text': 4.7,
                'Your Text': entropy
            };
            
            entropyChart = new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: Object.keys(referenceData),
                    datasets: [{
                        label: 'Entropy (bits/character)',
                        data: Object.values(referenceData),
                        backgroundColor: [
                            'rgba(52, 152, 219, 0.7)',
                            'rgba(46, 204, 113, 0.7)',
                            'rgba(231, 76, 60, 0.7)'
                        ],
                        borderColor: [
                            'rgba(52, 152, 219, 1)',
                            'rgba(46, 204, 113, 1)',
                            'rgba(231, 76, 60, 1)'
                        ],
                        borderWidth: 1
                    }]
                },
                options: {
                    scales: {
                        y: {
                            beginAtZero: true,
                            max: 5,
                            title: {
                                display: true,
                                text: 'Entropy (bits/character)'
                            }
                        }
                    },
                    plugins: {
                        title: {
                            display: true,
                            text: 'Entropy Comparison'
                        }
                    }
                }
            });
        }

        // ML Cryptanalysis Features
        
        // Cipher Classification
        document.getElementById('classify-cipher').addEventListener('click', function() {
            const text = document.getElementById('cipher-sample').value;
            const classification = classifyCipher(text);
            document.getElementById('classification-result').innerHTML = `
                <h4>Cipher Classification Result:</h4>
                <p><strong>Most likely:</strong> ${classification.mostLikely}</p>
                <p><strong>Confidence:</strong> ${classification.confidence}%</p>
                <p><strong>Details:</strong> ${classification.details}</p>
            `;
        });

        function classifyCipher(text) {
            // This is a simplified simulation - a real implementation would use a trained ML model
            const features = {
                hasNonAlpha: /[^a-zA-Z\s]/.test(text),
                caseConsistent: text === text.toUpperCase() || text === text.toLowerCase(),
                wordLengths: text.split(/\s+/).map(word => word.length),
                charDistribution: calculateEntropy(text)
            };
            
            // Simple heuristic-based classification
            let mostLikely = "Unknown";
            let confidence = 50;
            let details = "Unable to determine with high confidence.";
            
            if (features.charDistribution > 4.5) {
                mostLikely = "Random Text or One-Time Pad";
                confidence = 75;
                details = "High entropy suggests random distribution of characters.";
            } else if (!features.hasNonAlpha && features.caseConsistent) {
                mostLikely = "Classical Cipher (Caesar, Substitution, or Vigen√®re)";
                confidence = 70;
                details = "Text contains only letters with consistent casing, typical of classical ciphers.";
            } else if (features.hasNonAlpha) {
                mostLikely = "Base64 or Modern Encryption";
                confidence = 65;
                details = "Presence of non-alphabetic characters suggests encoding like Base64 or modern encryption.";
            }
            
            return { mostLikely, confidence, details };
        }

        // Neural Cryptanalysis Simulation
        document.getElementById('neural-analysis').addEventListener('click', function() {
            const text = document.getElementById('neural-input').value;
            const result = simulateNeuralAnalysis(text);
            document.getElementById('neural-result').innerHTML = `
                <h4>Neural Network Analysis:</h4>
                <p><strong>Pattern Detected:</strong> ${result.pattern}</p>
                <p><strong>Confidence Score:</strong> ${result.confidence}</p>
                <p><strong>Recommended Approach:</strong> ${result.recommendation}</p>
                <div style="margin-top: 10px;">
                    <strong>Layer Activations:</strong>
                    <ul>
                        ${result.activations.map(activation => `<li>${activation}</li>`).join('')}
                    </ul>
                </div>
            `;
        });

        function simulateNeuralAnalysis(text) {
            // Simulate a neural network analysis
            const patterns = [
                "Repetitive sequences detected",
                "Low entropy pattern identified",
                "Frequency distribution matches substitution cipher",
                "Possible polyalphabetic cipher characteristics"
            ];
            
            const randomPattern = patterns[Math.floor(Math.random() * patterns.length)];
            const confidence = (70 + Math.random() * 25).toFixed(2);
            
            const recommendations = [
                "Try frequency analysis with n-gram models",
                "Apply Kasiski examination for key length detection",
                "Use hill-climbing algorithm with fitness function",
                "Implement genetic algorithm for key space exploration"
            ];
            
            const randomRecommendation = recommendations[Math.floor(Math.random() * recommendations.length)];
            
            const activations = [
                "Input layer: Character encoding",
                "Hidden layer 1: Pattern recognition",
                "Hidden layer 2: Sequence analysis",
                "Hidden layer 3: Statistical modeling",
                "Output layer: Cipher classification"
            ];
            
            return {
                pattern: randomPattern,
                confidence: confidence + "%",
                recommendation: randomRecommendation,
                activations: activations
            };
        }

        // Training Data Generator
        document.getElementById('generate-data').addEventListener('click', function() {
            const baseText = document.getElementById('training-text').value;
            const trainingData = generateTrainingData(baseText);
            document.getElementById('training-result').innerHTML = `
                <h4>Generated Training Data:</h4>
                <p><strong>Original:</strong> ${trainingData.original}</p>
                <p><strong>Caesar (shift=3):</strong> ${trainingData.caesar}</p>
                <p><strong>Vigen√®re (key=KEY):</strong> ${trainingData.vigenere}</p>
                <p><strong>Base64:</strong> ${trainingData.base64}</p>
                <p><strong>Entropy:</strong> ${trainingData.entropy.toFixed(4)}</p>
            `;
        });

        function generateTrainingData(text) {
            return {
                original: text,
                caesar: caesarCipher(text, 3),
                vigenere: vigenereCipher(text, "KEY", true),
                base64: btoa(text),
                entropy: calculateEntropy(text)
            };
        }

        // Initialize with some sample analyses
        window.onload = function() {
            // Trigger frequency analysis with sample text
            document.getElementById('analyze-freq').click();
            
            // Trigger entropy calculation with sample text
            document.getElementById('calculate-entropy').click();
            
            // Encrypt sample texts
            document.getElementById('caesar-encrypt').click();
            document.getElementById('vigenere-encrypt').click();
            document.getElementById('base64-encode').click();
        };
    </script>
</body>
</html>